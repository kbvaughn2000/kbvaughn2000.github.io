{{ define "main" }}
<div class="container whoami-page">
    
    <header class="terminal-header">
        <span data-pagefind-meta="title" style="display: none;">{{ .Title }}</span>
        <h1 class="typing-container">
            <span class="prompt">></span>
            <span id="typing-whoami" class="typewriter-target"></span>
        </h1>
    </header>

    <div id="whoami-content" style="opacity: 0; transform: translateY(10px); transition: opacity 0.8s ease-out, transform 0.8s ease-out;">
        <article data-pagefind-body>         
        <section class="profile-section">
            <h2 class="section-header">[ 01. PROFESSIONAL_SUMMARY ]</h2>
            <div class="section-body">
                <p class="summary-text">{{ .Params.professional_summary }}</p>
            </div>
        </section>

        <section class="profile-section">
            <h2 class="section-header">[ 02. EXPERIENCE_LOG ]</h2>
            <div class="section-body">
                {{ range .Params.experience }}
                <div class="exp-item">
                    <span class="role-title" style="display: block; font-weight: bold; color: var(--primary);">{{ .role }}</span>
                    <div class="company-line">
                        {{ .company }} <span class="terminal-dim">// {{ .range }}</span>
                    </div>
                    <p class="exp-details" style="margin-top: 5px; opacity: 0.9;">{{ .details }}</p>
                </div>
                {{ end }}
            </div>
        </section>

        <section class="profile-section">
            <h2 class="section-header">[ 03. ACADEMIC_HISTORY ]</h2>
            <div class="section-body">
                {{ range .Params.education }}
                <div class="edu-item">
                    <span class="edu-degree" style="font-weight: bold; color: var(--primary);">{{ .degree }}</span>
                    <div class="edu-school">
                        {{ .school }} <span class="terminal-dim">// {{ .year }}</span>
                    </div>
                </div>
                {{ end }}
            </div>
        </section>

        <section class="profile-section">
            <h2 class="section-header">[ 04. VULNERABILITY_DISCLOSURES ]</h2>
            <div class="section-body">
                {{ range .Params.cves }}
                <div class="cve-entry">
                    <span class="cve-id" style="color: var(--primary);">[{{ .id }}]</span>
                    <span class="cve-title">{{ .title }}</span>
                </div>
                {{ end }}
            </div>
        </section>

        <section class="profile-section">
            <h2 class="section-header">[ 05. SKILLS_MATRIX ]</h2>
            <div class="section-body">
                <div class="skills-grid">
                    {{ range .Params.skills }}
                    <div class="skill-category" style="margin-bottom: 10px;">
                        <span class="category-title" style="font-weight: bold; color: var(--primary);">{{ .category }}:</span>
                        <span class="category-items" style="opacity: 0.8;">{{ delimit .items ", " }}</span>
                    </div>
                    {{ end }}
                </div>
            </div>
        </section>

        <section class="profile-section">
            <h2 class="section-header">[ 06. VALIDATED_CREDENTIALS ]</h2>
            <div class="section-body">
                <p class="summary-text" style="opacity: 0.6; font-style: italic;">EXTERNAL SECURE RECORDS IDENTIFIED...</p>
                
                <div class="manifest-container" style="text-align: center; margin-top: 20px;">
                    <a href="/certifications" class="cert-manifest-link" style="text-decoration: none; color: var(--primary); border: 1px solid var(--primary); padding: 10px 20px; display: inline-block;">
                        [ VIEW_FULL CERTIFICATION_MANIFEST ]
                    </a>
                </div>
            </div>
        </section>

        <section class="profile-section">
            <h2 class="section-header">[ 07. PUBLICATIONS ]</h2>
            <div class="section-body">
                {{ range .Params.publications }}
                <div class="pub-item">
                    <span class="terminal-dim">></span> 
                    {{ if .link }}
                        <a href="{{ .link }}" target="_blank" class="pub-link" style="color: var(--primary); text-decoration: none;"><strong>{{ .title }}</strong></a>
                    {{ else }}
                        <strong style="color: var(--primary);">{{ .title }}</strong>
                    {{ end }}
                    â€” {{ .publisher }} ({{ .year }})
                </div>
                {{ end }}
            </div>
        </section>
        
        <section class="profile-section">
            <h2 class="section-header">[ 08. KEY_ACHIEVEMENTS ]</h2>
            <div class="section-body">
                {{ range .Params.achievements }}
                <div class="ach-item">
                    <span class="terminal-dim">></span> {{ . }}
                </div>
                {{ end }}
            </div>
        </section>

        <div class="writeup-footer" style="margin-top: 50px; border-top: 1px dashed rgba(var(--primary-rgb), 0.2); padding-top: 20px; text-align: right;">
            <a href="/" class="nav-item" style="text-decoration: none; display: inline-block; color: var(--primary);"><< RETURN_TO_ROOT</a>
        </div>
    </div> 
    </article>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const text = "IDENTIFY_USER --VERBOSE";
        const typingElement = document.getElementById('typing-whoami');
        const contentContainer = document.getElementById('whoami-content');
        let i = 0;

        function type() {
            if (i < text.length) {
                typingElement.textContent += text.charAt(i);
                i++;
                setTimeout(type, 50); 
            } else {
                // Typing finished: Reveal content
                setTimeout(() => {
                    contentContainer.style.opacity = "1";
                    contentContainer.style.transform = "translateY(0)";
                }, 300);
            }
        }
        setTimeout(type, 300);
    });
</script>
{{ end }}
